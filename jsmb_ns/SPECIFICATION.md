# Спецификация

Данная информация-спецификация является важной частью работы с архитектурой библиотеки.
Соблюдения правил, структур, архитектуры аннотаций даст преимущества:

- быстро разворачивать приложения
- эффективно использовать зависимостей частей приложения (модулей)
- использовать модули с других проектов этого приложения
- динамически работать с данными
- контролировать процессы выполнения
- упорядочить и структурировать различные задачи выполнения
- расширять приложения
- находить и исправлять баги
- проводить сборку приложения, при помощи скрипта [watcher.py](/Werdffelynir/watcher) 

## Терминология

__NS__ (Пространство имени) - Пространства имен является связующим звеном между частями программы, они присваиваются динамически и дают доступ к объектам которые были для них определенны.
__app__ (Приложения) - Проект, все файлы разрабатываемой программы.
__extension__ или __module__(Расширения) - отдельный скрипт имеющий низкий или высокий уровень зависимости от других расширений. (Обратите внимание, не следует путать данный термин с расширением в пространстве имени `Module`, что вы встретите в примерах)
__УЗ__ (Уровень зависимости) - Указывает уровень зависимости частей программы от 0 и выше


## Структура и связи

JavaScript сам по себе дает очень гибкий инструмент для работы, это и есть основной недостаток, который приводит к запутанному не структурированному коду. JavaScript нужна структурность, это и пытается дать библиотека и даже от части ООП подход.



Базовая сруктура приложения может выглядить следующим образом:

```
app
├───── ─ ─ ─ ─ ─ > ─ > ─ ─ ns                      (1) ядро (УЗ:0)
|                          └── ns.application.js   
|
├───── ─ ─ ─ ─ ─ > ─ > ─ ─ library                 (2) библиотеки (УЗ:0)
|                          ├── lib.js
├── css                    ├── ...
│   ├── desktop.css        └── ...
│   ├── main.css
│   └── mobile.css
|
├── js.app                 (3) приложения (УЗ:2 ns, library)
│   ├── action                (4) модули action (УЗ:1 static)
│   │   ├── actions.js
│   │   ├── ...
│   │   └── ...
│   ├── controller            (5) модули controller (УЗ:2 static, actions)
│   │   ├── controllers.js
│   │   ├── ...
│   │   └── ...
│   ├── static                (6) модули static
│   │   ├── statics.js
│   │   ├── ...
│   │   └── ...
│   ├── templates
│   │   ├── content.html
│   │   ├── ...
│   │   └── ...
│   └── init.js
│   
├── js
│   ├── ...
│   └── ...
|
└──index.php
```

Приложение представляет собой набор файлов в древовидной форме, фактически вся программа состоит с расширений и связей между ними. 

Расширения разделяются по типам или уровнями зависимости друг от друга и от дополнительных библиотек которые они используют, из-за этого нужно подгружать скрипты расширений в определенной последовательности - не зависимые части должны подгружается первыми. 
Например __блок подгрузки__ через `App.require` обезпечивает последовательную синхронную загрузку файлов 
```js
App.require('libs',
        [
            App.url + 'js/library/lib1.js',     // будет загружен первым
            App.url + 'js/library/lib2.js',     // будет загружен вторым
            App.url + 'js/library/lib3.js'      // третим
        ],
        onLibraryLoaded, onRequireError);
```


Если брать с примера выше структуру приложения, расширения можно структурировать по уровнях зависимостей так:

1 __ns__ - погружается первым, екземпляр объекта NamespaceApplication является стержнем программы. Именно екземпляр NamespaceApplication подключает все зависимости, и создает пространства имен для модулей-расширений. Все части приложения кроме __library__ зависят от экземпляра __ns__.

2 __library__ - так же не является зависимым, это дополнительные инструменты скрипты/классы для всего приложения

3 __js.app__ - Зависит от __ns__, __library__

4 __action__ - Зависит от __ns__, __library__, __static__

5 __controller__ - Зависит от __ns__, __library__, __static__, __action__

6 __static__ - Зависит от __ns__, __library__

